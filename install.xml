<?xml version="1.0"?>
<!DOCTYPE modification SYSTEM "http://www.simplemachines.org/xml/modification">
<modification xmlns="http://www.simplemachines.org/xml/modification" xmlns:smf="http://www.simplemachines.org/">
<id>dougiefresh:404status</id>
<name>HTML 404 Error on Missing Topics/Boards</name>
<version>1.0</version>

<file name="$sourcedir/Errors.php">
	<operation>
		<search position="replace"><![CDATA[$error_message = empty($sprintf) ? $txt[$error] : vsprintf($txt[$error], $sprintf);
	}]]></search>
		<add><![CDATA[$error_message = empty($sprintf) ? $txt[$error] : vsprintf($txt[$error], $sprintf);
	}

	// Include a error code in the header if error message is a certain type:
	if (in_array($error, array('no_board', 'wrong_forum')))
		header('HTTP/1.1 404 Not Found');
	elseif (in_array($error, array('not_a_topic', 'topic_gone')))
		header('HTTP/1.1 410 Gone');]]></add>
	</operation>
</file>
</modification>